# Requirements

## 1. 상품(Product) 도메인

### 1.1. 상품 목록 조회

- 정상 플로우
    - 로그인되지 않은 사용자도 상품 목록 조회할 수 있다
    - 각 상품의 좋아요 수가 표기된다
    - 등록된 상품들의 목록을 조회할 수 있다
    - 상품의 가격, 좋아요, 등록일 기준으로 정렬하여 조회할 수 있다 (기본 등록일)
    - 특정 브랜드, 등록된 상품의 품절 유무 기준으로 필터링하여 조회할 수 있다
    - 필터링된 상품들을 정렬하여 조회할 수 있다
    - 페이지 사이즈는 20, 50, 100으로 제한한다 (기본 20)
- 예외 플로우
    - 조회 결과가 없는 경우 빈 목록을 반환한다 → 200 OK
    - 등록되지 않은 브랜드를 필터링 조건으로 하는 경우 오류를 반환한다 → 404 NOT FOUND
    - 잘못된 페이지 번호(< 0), 사이즈(20, 50, 100 외) 로 조회 하는 경우 오류를 반환한다 → 400 BAD REQUEST
- NFR
    - 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다

### 1.2. 상품 정보 조회

- 정상 플로우
    - 등록된 상품 정보를 조회할 수 있다
    - 상품 정보에 좋아요 수가 표기된다
- 예외 플로우
    - 등록되지 않은 상품 정보를 조회하는 경우 오류를 반환한다 → 404 NOT FOUND
- NFR
    - 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다

## 2. 브랜드(Brand) 도메인

### 2.1. 브랜드 정보 조회

- 정상 플로우
    - 등록된 브랜드 정보를 조회할 수 있다
- 예외 플로우
    - 등록되지 않은 브랜드를 조회하는 경우 오류를 반환한다 → 404 NOT FOUND
- NFR
    - 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다

## 3. 좋아요

### 3.1. 상품 좋아요 요청

- 정상 플로우
    - 로그인한 유저만 상품에 좋아요를 등록할 수 있다
- 예외 플로우
    - 로그인하지 않은 상태로 좋아요를 요청하는 경우 로그인 요청을 한다 → 401 Unauthorized
    - 이미 좋아요 요청된 경우 좋아요 성공 응답을 한다  → 200 OK
    - 존재하지 않는 상품에 좋아요 요청하는 경우 오류를 반환한다 → 404 Not Found
- NFR
    - 사용자 인증은 `X-USER-ID` Header 기반으로 처리된다
    - 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다
    - 좋아요 요청 멱등성을 보장한다

### 3.2. 상품 좋아요 취소

- 정상 플로우
    - 로그인한 유저만 상품에 좋아요 취소할 수 있다
    - 좋아요 요청된 상품에만 취소할 수 있다
- 예외 플로우
    - 이미 좋아요 취소된 경우 취소 성공 응답을 한다  → 200 OK
    - 존재하지 않는 상품에 취소 요청하는 경우 오류를 반환한다 → 404 Not Found
- NFR
    - 사용자 인증은 `X-USER-ID` Header 기반으로 처리된다
    - 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다
    - 취소요청 멱등성을 보장한다

### 3.3. 내가 좋아요 한 상품 목록 조회

- 정상 플로우
    - 로그인한 유저만 좋아요한 상품 목록을 조회할 수 있다
    - 가장 최근 좋아요한 상품순으로 정렬된다
    - 상품의 가격, 좋아요, 등록일 기준으로 정렬하여 조회할 수 있다 (기본 등록일)
    - 페이지 사이즈는 20, 50, 100으로 제한하여 조회한다 (기본 20)
    - 좋아요한 상품이 없는 경우 빈 리스트를 조회한다
    - 등록/판매 중지 상품 제외하고 조회한다
- 예외 플로우
    - 로그인하지 않은 상태로 조회 요청하는 경우 오류를 반환한다 → 401 Unauthorized
- NFR
    - 사용자 인증은 `X-USER-ID` Header 기반으로 처리된다
    - 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다

## 4. 주문(Order) 도메인

### 4.1. 주문 요청

- 정상 플로우
    - 로그인한 유저만 주문 요청할 수 있다
    - 판매중인 상품만 주문 요청할 수 있다
    - 등록된 상품만 주문 요청할 수 있다
    - 재고가 남아있는 상품만 주문 요청할 수 있다
    - 포인트가 충분한 경우 주문할 수 있다
- 예외 플로우
    - 로그인하지 않은 상태로 주문 요청하는 경우 오류를 반환한다 → 401 Unauthorized
    - 포인트가 부족한 상태로 주문 요청하는 경우 오류를 반환한다 → 400 Bad Request
    - 재고가 부족한 상품을 주문 요청하는 경우 오류를 반환한다 → 409 Conflict
    - 판매 중단된 상품을 주문 요청하는 경우 오류를 반환한다 → 409 Conflict
    - 존재하지 않는 상품을 주문 요청하는 경우 오류를 반환한다 → 404 Not Found
    - 주문이 결재 승인이 실패한 경우 오류를 반환한다 → 502 Bad Gateway
- NFR
    - 사용자 인증은 `X-USER-ID` Header 기반으로 처리된다
    - 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다
    - 동일한 주문요청시 멱등성을 보장한다

### 4.2. 주문 목록 조회

- 정상 플로우
    - 로그인한 유저만 주문목록을 조회할 수 있다
    - 주문 상품, 개수, 상태(주문, 취소, 배송, 완료)를 확인할 수 있다
    - 유저가 요청한 주문들만 조회할 수 있다
    - **페이지 사이즈** (20 / 50 / 100, 기본 20)로 조회할 수 있다
    - 상태, 총 주문 가격으로 정렬하여 조회할 수 있다
    - **주문 상태 및 기간으로 필터링하여 조회할 수 있다**
- 예외 플로우
    - 로그인하지 않은 상태로 요청하는 경우 오류를 반환한다 → 401 Unauthorized
    - 유저가 요청하지 않은 주문을 조회 요청하는 경우 오류를 반환한다 → 403 Forbidden
    - 페이지 파라미터를 초과해서 요청하는 경우 오류를 반환한다 → 400 Bad Request
- NFR
    - 사용자 인증은 `X-USER-ID` Header 기반으로 처리된다
    - 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다

### 4.3. 단일 주문 상세 조회

- 정상 플로우
    - 로그인한 유저만 단일 주문 상세조회할 수 있다
    - 유저가 요청한 주문만 조회할 수 있다
    - 주문 상품, 개수, 상태(주문, 취소, 배송, 완료)를 확인할 수 있다
- 예외 플로우
    - 로그인하지 않은 상태로 주문 요청하는 경우 오류를 반환한다 → 401 Unauthorized
    - 유저가 요청하지 않은 주문을 조회 요청하는 경우 오류를 반환한다 → 403 Forbidden
- NFR
    - 사용자 인증은 `X-USER-ID` Header 기반으로 처리된다
    - 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다